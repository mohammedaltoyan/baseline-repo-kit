name: Bootstrap Labels

on:
  workflow_dispatch:

permissions:
  issues: write

jobs:
  bootstrap:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Checkout
        uses: actions/checkout@v6

      - name: Ensure baseline labels exist
        uses: actions/github-script@v8
        with:
          script: |
            const { ensureLabel } = require('./.github/scripts/gh-helpers.js');

            const owner = context.repo.owner;
            const repo = context.repo.repo;

            const labels = [
              { name: 'plans', color: '5319e7', description: 'Canonical planning system changes' },
              { name: 'ops', color: '0052cc', description: 'Operational tooling and runbooks' },
              { name: 'tooling', color: '1d76db', description: 'Repo tooling and automation' },
              { name: 'ci', color: 'cfd3d7', description: 'CI and repository policy' },
              { name: 'docs', color: '0e8a16', description: 'Documentation changes' },
              { name: 'backend', color: 'fbca04', description: 'Backend app changes (apps/backend)' },
              { name: 'frontend', color: 'f9d0c4', description: 'Frontend app changes (apps/frontend)' },
              { name: 'packages', color: 'd4c5f9', description: 'Shared packages changes (packages/)' },
            ];

            for (const label of labels) {
              await ensureLabel({ github, owner, repo, ...label });
              core.info(`OK: ${label.name}`);
            }

