{
  "version": 1,
  "github": {
    "host": "github.com",
    "default_visibility": "private",
    "set_default_branch_to_integration": true,
    "enable_backport_default": true,
    "enable_security_default": false,
    "enable_deploy_default": false,
    "recommend_merge_queue_integration": true,
    "recommend_merge_queue_production": false,
    "required_check_workflows": [
      ".github/workflows/ci.yml",
      ".github/workflows/pr-policy.yml",
      ".github/workflows/release-policy-main.yml",
      ".github/workflows/env-isolation-lint.yml"
    ],
    "rulesets": {
      "integration": {
        "name": "baseline: integration",
        "enforcement": "active"
      },
      "production": {
        "name": "baseline: production",
        "enforcement": "active"
      }
    },
    "rules": {
      "pull_request": {
        "allowed_merge_methods": ["squash"],
        "dismiss_stale_reviews_on_push": true,
        "require_code_owner_review": true,
        "require_last_push_approval": false,
        "required_approving_review_count": 1,
        "required_review_thread_resolution": true
      },
      "pull_request_overrides": {
        "production": {
          "allowed_merge_methods": ["merge"]
        }
      },
      "merge_queue": {
        "parameters": {
          "check_response_timeout_minutes": 60,
          "grouping_strategy": "HEADGREEN",
          "max_entries_to_build": 5,
          "max_entries_to_merge": 5,
          "merge_method": "SQUASH",
          "min_entries_to_merge": 1,
          "min_entries_to_merge_wait_minutes": 5
        }
      },
      "required_status_checks": {
        "do_not_enforce_on_create": true,
        "strict_required_status_checks_policy": true
      }
    },
    "repo_settings": {
      "delete_branch_on_merge": true
    },
    "workflow_permissions": {
      "enabled": true,
      "default_workflow_permissions": "read",
      "can_approve_pull_request_reviews": true
    },
    "repo_variables": {
      "AUTOPR_ENABLED": "1",
      "AUTOPR_ENFORCE_BOT_AUTHOR": "1",
      "AUTOPR_ALLOWED_AUTHORS": "github-actions[bot],app/github-actions",
      "AUTOPR_ENFORCE_HEAD_PREFIXES": "codex/",
      "RELEASE_PR_BYPASS_PLAN_STEP": "1",
      "MAIN_REQUIRED_APPROVER_LOGINS": "$repo_owner_user",
      "MAIN_APPROVER_ALLOW_AUTHOR_FALLBACK": "0",
      "PRODUCTION_PROMOTION_REQUIRED": "enabled",
      "STAGING_PROMOTION_REQUIRED": "enabled",
      "STAGING_DEPLOY_GUARD": "enabled",
      "PRODUCTION_DEPLOY_GUARD": "disabled",
      "DOCS_PUBLISH_GUARD": "disabled",
      "API_INGRESS_DEPLOY_GUARD": "disabled",
      "STAGING_APPROVAL_MODE_DEFAULT": "commit",
      "PRODUCTION_APPROVAL_MODE_DEFAULT": "commit",
      "PRODUCTION_REQUIRES_STAGING_SUCCESS": "enabled",
      "DEPLOY_SURFACES_PATH": "config/deploy/deploy-surfaces.json",
      "DEPLOY_RECEIPTS_BRANCH": "ops/evidence",
      "DEPLOY_RECEIPTS_PREFIX": "docs/ops/evidence/deploy",
      "ENV_ISOLATION_LINT_ENABLED": "0",
      "DEPLOY_ENV_MAP_JSON": "{\"application\":{\"staging\":\"application-staging\",\"production\":\"application-production\"},\"docs\":{\"staging\":\"docs-staging\",\"production\":\"docs-production\"},\"api-ingress\":{\"staging\":\"api-ingress-staging\",\"production\":\"api-ingress-production\"}}"
    },
    "labels": {
      "enabled": true,
      "update_existing": false,
      "policy_path": "config/policy/github-labels.json"
    },
    "codeowners": {
      "enabled": true,
      "create_if_missing": true,
      "replace_if_no_rules": true,
      "default_owners": ["$repo_owner_user"]
    },
    "security": {
      "enabled": true,
      "enable_vulnerability_alerts": true,
      "enable_automated_security_fixes": true,
      "security_and_analysis": {
        "secret_scanning": "enabled",
        "secret_scanning_push_protection": "enabled"
      }
    },
    "environments": {
      "enabled": true,
      "derive_deploy_component_environments": true,
      "derive_deploy_component_prefix": "DEPLOY_ENV_",
      "derive_deploy_component_map_json_var": "DEPLOY_ENV_MAP_JSON",
      "create_tier_environments": false,
      "defaults": [
        { "name": "staging", "branches": ["$integration"], "wait_timer": 0, "can_admins_bypass": true },
        {
          "name": "production",
          "branches": ["$production"],
          "wait_timer": 0,
          "prevent_self_review": false,
          "can_admins_bypass": true,
          "required_reviewers": ["$repo_owner_user"]
        }
      ]
    }
  }
}
